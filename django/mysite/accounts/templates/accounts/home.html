{% extends 'accounts/main.html' %}
{% load static %}
 
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<style>
    .booklink{
        text-decoration: solid;
        
        color: black;
    }
    .booklink:hover{
        color: #2774f0;
        text-shadow: black;
    }
    .card:hover{
        box-shadow:2px 2px 2px 1px grey;
        
    }

</style>

<img id="bghome" src="{% static '/images/bghome.jpg' %}" alt="">
<div class="container">
        <div id="intro">
            <h3 style="text-align: center;"> Welcome to world of Books</h3>

            <br>
          
            <form class="d-flex " action="{% url 'booksearch' %}" method="GET">
                {% csrf_token %}

                <select style="width: 100%;" class="name" name="name"></select>
                
                <select name="category" id="category">

                    <option value=""></option>
                    {% for i in category  %}
                        <option value="{{i.name}}">{{i.name}}</option>
                    {% endfor %}
                </select>
                <button class="btn btn-secondary search input" type="submit">Search</button>

            </form>
      
        </div>
        
    </div>
    <br>
    <div class="card-group" style="display: flex; flex-direction:row" >
        {% for i in books %}

        
        <div class="card" style=" margin: 5px;">
            <img style="height: 200px ; " src="{{i.image.url}}" class="card-img-top" alt="...">
            <div class="card-body" >
                <a href="{% url 'bookdetail' i.id %}"  class="booklink">{{i.name}}</a>
                <!-- <h6 style="width: 10rem;"class="card-title">{{i.name}}</h6> -->
                <p style="width: 10rem; font-weight: 279;"class="card-title">{{i.author}}</p>
                
            </div>

            
        </div>
        {% endfor %}
        
    </div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
  
    $(document).ready(function () {
        $('.name').select2({
            ajax: {
                url:" {% url 'booksuggestions' %}",
                dataType: 'json',
                processResults: function (data) {
                    return {
                        results: $.map(data, function (item) {
                            console.log(item.name)
                            return { text: item.name,id: item.id};
                        })
                    };
                }
            },
            minimumInputLength: 1
        });
    });

    </script>
    


{% endblock %}
